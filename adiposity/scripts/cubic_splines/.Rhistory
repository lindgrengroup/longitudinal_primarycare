library(RColorBrewer)
brewer.pal(3, "Set1")
sd(c(180.7, 185.1, 198.1, 175.3, 181.3, 179.4, 166.5, 176.9))
SEX_STRATA <- c("F", "M", "sex_comb")
paste0("PC", c(1:21))
library(tidyverse)
?pivot_longer
res <- c(NA, NA, NA)
is.na(all(res))
all(is.na(res))
res <- c(NA, NA, 2)
all(is.na(res))
test <-c(0,0,1,10,0,3)
test > 0
test <- c("eid", "sex", "ancestry", "PC1", "ICD_chapter_F", "ICD_chapter_K", "year_of_birth")
GROUPS_OF_INTEREST <- c("sex", "year_of_birth", "baseline_age",
"FUyrs", "FU_n",
"smoking_status", "^ICD_")
grep(paste0(GROUPS_OF_INTEREST, collapse = "|"), test)
tmp <- seq(1940:1980, by = 1)
tmp <- seq(1940, 1980, by = 1)
cut_points <- c(1900, 1940, 1950, 1960, 1970, 2022)
cut_labels <- c("pre-1940", "'40-'49", "'50-'59", "'60-'69", "post-1970")
res <- cut(tmp, breaks = cut_points, labels = cut_labels,
include.lowest = T, right = F)
res
tmp <- seq(1920:1980, by = 1)
tmp <- seq(1920,1980, by = 1)
cut_points <- c(1900, 1940, 1950, 1960, 1970, 2022)
cut_labels <- c("pre-1940", "'40-'49", "'50-'59", "'60-'69", "post-1970")
res <- cut(tmp, breaks = cut_points, labels = cut_labels,
include.lowest = T, right = F)
res
tmp <- c(1920, 1930, 1939, 1940, 1959, 1960, 1961, 1970, 1971)
cut(tmp, breaks = cut_points, labels = cut_labels,
include.lowest = T, right = F)
cut_points <- c(1900, 1940, 1950, 1960, 1971, 2022)
cut_labels <- c("pre-1940", "'40-'49", "'50-'59", "'60-'70", "post-1970")
cut(tmp, breaks = cut_points, labels = cut_labels,
include.lowest = T, right = F)
tmp <- c(2, 3, 4, 5, 9, 10, 11, 14, 15, 16)
cut_points <- c(2, 4, 10, 15, 100)
cut_labels <- c("2-4", "5-10", "11-15", "16+")
cut(tmp, breaks = cut_points, labels = cut_labels,
include.lowest = T, right = T)
library(mclust)
library(tidyverse)
library(tidyverse)
theme_set(theme_bw())
# Read BIC file ----
bic_dat <- read.table("C:/Users/samvida/Documents/Lindgren Group/Adiposity_Primary_Care/2204_models/spline_models/model_bic.txt",
sep = "\t", header = T, stringsAsFactors = F)
# Plot BIC plots for model selection ----
head(bic_dat)
ggplot(bic_dat, aes(x = ndf_fe, y = BIC)) +
facet_wrap(~strata, ncol = 3) +
geom_point() +
geom_line() +
label(x = "# degrees of freedom", y = "BIC")
ggplot(bic_dat, aes(x = ndf_fe, y = BIC)) +
facet_wrap(~strata, ncol = 3) +
geom_point() +
geom_line() +
labs(x = "# degrees of freedom", y = "BIC")
ggplot(bic_dat, aes(x = ndf_fe, y = BIC)) +
facet_wrap(~strata, ncol = 3, scales = "free_y") +
geom_point() +
geom_line() +
labs(x = "# degrees of freedom", y = "BIC")
res_plot <- ggplot(bic_dat, aes(x = ndf_fe, y = BIC)) +
facet_wrap(~strata, ncol = 3, scales = "free_y") +
geom_point() +
geom_line() +
labs(x = "# degrees of freedom", y = "BIC")
png("C:/Users/samvida/Documents/Lindgren Group/Adiposity_Primary_Care/2204_models/spline_models/model_bic.png")
res_plot
dev.off()
pred_value <- t(apply(mn_mat[id_list, ], 1, function (x) model_dat$B %*% x))
0.112 - (2*0.0905)
-0.0186 - (1.96*0.260)
